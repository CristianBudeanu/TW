@model IEnumerable<EasyBreath.Domain.Entities.ShoppingCart.ShoppingItemCart>
@using EasyBreath.web.Extensions
@{
     Layout = null;
     var user = System.Web.HttpContext.Current.GetMySessionObject();
}

<!DOCTYPE html>

<html>
<head>
     <meta name="viewport" content="width=device-width" />
     <title>Index</title>
</head>
<body>
     <p>
          @Html.ActionLink("Create New", "Create")
     </p>
     <table class="table">
          <tr>
               <th>
                    @Html.DisplayNameFor(model => model.Product.Name)
               </th>
               <th>
                    @Html.DisplayNameFor(model => model.Product.Price)
               </th>
               <th>
                    @Html.DisplayNameFor(model => model.Quantity)
               </th>
               <th></th>
          </tr>

          @foreach (var item in Model)
          {
               <tr>
                    <td>
                         @Html.DisplayFor(modelItem => item.Product.Name)
                    </td>
                    <td>
                         @Html.DisplayFor(modelItem => item.Product.Price)
                    </td>
                    <td>
                         @Html.DisplayFor(modelItem => item.Quantity)
                    </td>
                    <td>
                         @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                         @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                         @using (Html.BeginForm("DeleteFromCart", "Cart", new { productId = item.Product.Id, userId = user.Id }, FormMethod.Post))
                         {
                              @Html.AntiForgeryToken()
                              <button type="submit" class="btn-link">Delete From Cart</button>
                         }
                    </td>
               </tr>
          }

     </table>
</body>
</html>
